## âš–ï¸ **Layer 4: Load Balancing & Traffic Management**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        APPLICATION LOAD BALANCER                               â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      ALB Configuration                                 â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚  Network:                                                               â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Scheme: Internet-facing                                           â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ IP Address Type: IPv4 + IPv6                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Subnets: Public subnets in 2 AZs                                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€ Security Groups: ALB-SG (80, 443 inbound)                         â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚  Listeners:                                                             â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ HTTP:80 â†’ HTTPS:443 (301 Redirect)                                â”‚   â”‚
â”‚  â”‚  â””â”€â”€ HTTPS:443 â†’ Target Groups (Path-based)                            â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚  SSL Policy: ELBSecurityPolicy-TLS13-1-2-2021-06                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                        â”‚                                        â”‚
â”‚                                        â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                       TARGET GROUPS                                    â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚Registration â”‚ â”‚   Search    â”‚ â”‚    Chat     â”‚ â”‚   Frontend  â”‚      â”‚   â”‚
â”‚  â”‚  â”‚    TG       â”‚ â”‚     TG      â”‚ â”‚     TG      â”‚ â”‚     TG      â”‚      â”‚   â”‚
â”‚  â”‚  â”‚   :3000     â”‚ â”‚   :3001     â”‚ â”‚   :3002     â”‚ â”‚    :80      â”‚      â”‚   â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚      â”‚   â”‚
â”‚  â”‚  â”‚Health: /api â”‚ â”‚Health: /api â”‚ â”‚Health: /api â”‚ â”‚Health: /    â”‚      â”‚   â”‚
â”‚  â”‚  â”‚/farmers/    â”‚ â”‚/search/     â”‚ â”‚/chat/       â”‚ â”‚             â”‚      â”‚   â”‚
â”‚  â”‚  â”‚health       â”‚ â”‚health       â”‚ â”‚health       â”‚ â”‚             â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚  Routing Rules:                                                         â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /api/farmers/* â†’ Registration TG                                  â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /api/search/* â†’ Search TG                                         â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /api/chat/* â†’ Chat TG                                             â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /socket.io/* â†’ Chat TG (WebSocket)                                â”‚   â”‚
â”‚  â”‚  â””â”€â”€ /* â†’ Frontend TG (Default)                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
```

## ğŸŒ **Layer 5: Network Infrastructure (VPC)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    VPC                                         â”‚
â”‚                              10.0.0.0/16                                       â”‚
â”‚                          (65,536 IP addresses)                                 â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          PUBLIC TIER                                   â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚   â”‚
â”‚  â”‚  â”‚   PUBLIC-1A     â”‚              â”‚   PUBLIC-1B     â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚  10.0.1.0/24    â”‚              â”‚  10.0.2.0/24    â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚   (AZ-1a)       â”‚              â”‚   (AZ-1b)       â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚                 â”‚              â”‚                 â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ NAT Gateway â”‚ â”‚              â”‚ â”‚ NAT Gateway â”‚ â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â”‚   (HA)      â”‚ â”‚              â”‚ â”‚   (HA)      â”‚ â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚                 â”‚              â”‚                 â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â”‚     ALB     â”‚ â”‚              â”‚ â”‚     ALB     â”‚ â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â”‚  (Active)   â”‚ â”‚              â”‚ â”‚ (Standby)   â”‚ â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                        â”‚                                        â”‚
â”‚                                        â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         PRIVATE TIER                                   â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚   â”‚
â”‚  â”‚  â”‚   PRIVATE-1A    â”‚              â”‚   PRIVATE-1B    â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚  10.0.10.0/24   â”‚              â”‚  10.0.11.0/24   â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚   (AZ-1a)       â”‚              â”‚   (AZ-1b)       â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚                 â”‚              â”‚                 â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ ECS Services:   â”‚              â”‚ ECS Services:   â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€Registration  â”‚              â”‚ â”œâ”€Registration  â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€Search        â”‚              â”‚ â”œâ”€Search        â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€Chat          â”‚              â”‚ â””â”€Chat          â”‚                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   â”‚
â”‚  â”‚                                                                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚   â”‚
â”‚  â”‚  â”‚   DATABASE-1A   â”‚              â”‚   DATABASE-1B   â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚  10.0.20.0/24   â”‚              â”‚  10.0.21.0/24   â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚   (AZ-1a)       â”‚              â”‚   (AZ-1b)       â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚                 â”‚              â”‚                 â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€RDS Primary   â”‚              â”‚ â”œâ”€RDS Standby   â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€Redis Primary â”‚              â”‚ â”œâ”€Redis Replica â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€OpenSearch    â”‚              â”‚ â””â”€OpenSearch    â”‚                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```